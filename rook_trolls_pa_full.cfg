label:voltar_cavebot
goto:209,973,8
goto:210,970,8,0
goto:214,976,7
goto:208,977,7
goto:208,977,7,0
goto:202,976,6
goto:202,977,6,0
function:[[
TargetBot.setOn(true)


return true



]]
goto:196,979,7
goto:190,983,7
goto:196,986,7
goto:197,992,7
goto:191,992,7
goto:185,992,7
goto:184,986,7
goto:184,986,7
usewith:3457,185,986,7
goto:185,986,7
goto:185,986,7,0
goto:186,983,8
goto:187,983,8,0
label:hunt
goto:181,986,9
goto:175,991,9
goto:169,991,9
goto:163,991,9
goto:160,985,9
goto:158,980,9
goto:159,980,9,0
goto:163,983,10
goto:159,980,10
usewith:3003,159,980,10
goto:159,980,10,0
goto:156,981,9
usewith:3003,156,981,9
goto:156,981,9,0
goto:152,984,8
goto:155,981,8
goto:156,981,8,0
goto:159,988,9
goto:153,989,9
goto:147,988,9
goto:141,992,9
goto:135,992,9
goto:135,989,9
usewith:3003,135,989,9
goto:135,989,9,0
goto:132,989,8
goto:134,989,8
goto:135,989,8,0
goto:132,987,9
goto:133,987,9,0
goto:127,987,10
goto:127,987,10
goto:133,987,10
goto:133,987,10
usewith:3003,133,987,10
goto:133,987,10,0
goto:139,991,9
goto:145,990,9
goto:151,987,9
goto:157,990,9
goto:157,996,9
goto:151,997,9
goto:150,1003,9
goto:148,1006,9
goto:149,1006,9,0
goto:154,1005,10
goto:149,1006,10
usewith:3003,149,1006,10
goto:149,1006,10,0
goto:151,1006,9
usewith:3003,151,1006,9
goto:151,1006,9,0
goto:157,1007,8
goto:163,1007,8
goto:157,1008,8
goto:151,1007,8
goto:150,1006,8
goto:151,1006,8,0
goto:152,1000,9
goto:160,991,9
goto:166,991,9
goto:172,991,9
goto:178,991,9
goto:184,987,9
goto:187,985,9
label:check
function:[[
-- Verifica se a Cap está CRÍTICA (menos de 20)


if player:getFreeCapacity() < 0.20 then


  delay(150)


  -- Tenta ir para o depósito


  if gotoLabel("Depositar") then


    return true


  else


    -- Se falhar em achar o label 'Depositar', volta pra hunt para não travar parado


    delay(300)


    gotoLabel("hunt")


    return true


  end


end


-- Se tiver Cap sobrando (> 0.20), força o loop para o início da hunt


gotoLabel("hunt")


return true



]]
label:depositar
goto:187,983,9
usewith:3003,187,983,9
goto:187,983,9
goto:185,986,8
usewith:3003,185,986,8
goto:185,986,8,0
goto:186,992,7
goto:192,990,7
goto:198,985,7
goto:201,979,7
goto:202,977,7,0
goto:208,976,6
function:[[
TargetBot.setOn(false)


return true



]]
goto:208,977,6,0
goto:214,974,7
goto:210,970,7,0
goto:204,971,8
goto:200,971,8
function:[[
storage.depositStep = storage.depositStep or 1


local amount = storage.totalGold or 0


-- Se não tiver gold, vai embora


if amount <= 0 then


    storage.depositStep = nil


    gotoLabel("Voltar_cavebot")


    return true


end


-- Sequência de conversa


if storage.depositStep == 1 then


    say("oi")


    delay(1000)


    storage.depositStep = 2


    return "retry"


elseif storage.depositStep == 2 then


    say("depositar")


    delay(1000)


    storage.depositStep = 3


    return "retry"


elseif storage.depositStep == 3 then


    say(tostring(amount)) -- Fala o valor que o Macro contou


    delay(1000)


    storage.depositStep = 4


    return "retry"


elseif storage.depositStep == 4 then


    say("sim")


    delay(1000)


    storage.depositStep = nil -- Reseta a sequência


    return true


end


return "retry"



]]
goto:207,967,8
function:[[
-- LISTA DE ITENS PARA DEPOSITAR


local itemsToDeposit = {


    3056, 3392, 3275


}


-- CONFIGURAÇÃO TÉCNICA


local lockerIds = {3497, 3498, 3499, 3500} -- IDs de Locker (Norte, Sul, Leste, Oeste)


local depotChestName = "Depot Chest"       -- Nome da janela onde os itens devem ir


local delayAction = 300                    -- Delay entre movimentos


-- LÓGICA DO SCRIPT


-- 1. Tenta encontrar a janela do Depot Chest aberta


local depotContainer = nil


for _, container in pairs(g_game.getContainers()) do


    if container:getName():lower() == depotChestName:lower() then


        depotContainer = container


        break


    end


end


-- 2. Se não achou o Depot Chest aberto, tenta abrir o Locker


if not depotContainer then


    local player = g_game.getLocalPlayer()


    local pos = player:getPosition()


    local lockerFound = nil


    


    -- Varre os 4 lados para achar o Locker


    for x = -1, 1 do


        for y = -1, 1 do


            if math.abs(x) + math.abs(y) == 1 then -- Apenas adjacentes (cruz)


                local tile = g_map.getTile({x=pos.x+x, y=pos.y+y, z=pos.z})


                if tile then


                    for _, item in ipairs(tile:getItems()) do


                        for _, id in ipairs(lockerIds) do


                            if item:getId() == id then


                                lockerFound = item


                                break


                            end


                        end


                    end


                end


            end


        end


    end


    if lockerFound then


        g_game.use(lockerFound) -- Usa o Locker


        delay(1000)             -- Espera abrir


        return "retry"          -- Tenta de novo na próxima volta


    else


        -- Se não achou locker por perto, segue a vida para não travar


        return true 


    end


end


-- 3. Se o Depot Chest já está aberto, começa a mover os itens


if depotContainer then


    -- REMOVIDO A LINHA QUE DAVA ERRO (player:getInventory)


    


    -- Varre todas as mochilas abertas nas suas costas


    for _, container in pairs(g_game.getContainers()) do


        -- Ignora o próprio Depot Chest (para não tentar tirar itens dele e por de volta)


        if container:getId() ~= depotContainer:getId() and container:getName():lower() ~= depotChestName:lower() then


            


            for i, item in ipairs(container:getItems()) do


                -- Verifica se o item está na lista


                for _, id in ipairs(itemsToDeposit) do


                    if item:getId() == id then


                        -- Move o item para o slot 0 do Depot Chest


                        g_game.move(item, depotContainer:getSlotPosition(0), item:getCount())


                        delay(delayAction)


                        return "retry" -- Retorna retry para mover um por vez (segurança)


                    end


                end


            end


        end


    end


end

gotoLabel("Voltar_cavebot")


return true



]]
goto:210,970,8
goto:210,970,8,0
label:templo-dp
function:[[
TargetBot.setOn(false)


return true



]]
goto:279,990,7
goto:279,984,7
goto:279,978,7
goto:274,972,7
goto:274,966,7
goto:268,965,7
goto:262,965,7
goto:256,965,7
goto:250,965,7
goto:244,966,7
goto:238,966,7
goto:232,968,7
goto:226,969,7
goto:220,970,7
goto:214,969,7
goto:210,969,7
config:{"ignoreFields":false,"ping":100,"walkDelay":10,"mapClick":false,"mapClickDelay":100,"skipBlocked":false,"useDelay":400}
extensions:[[
[

]
]]
