label:voltar_cavebot
goto:209,973,8
goto:210,970,8,0
goto:214,976,7
goto:208,977,7
goto:208,977,7,0
goto:202,976,6
goto:202,977,6,0
function:[[
TargetBot.setOn(true)


return true



]]
goto:196,979,7
goto:190,983,7
goto:196,986,7
goto:197,992,7
goto:191,992,7
goto:185,992,7
goto:184,986,7
goto:184,986,7
usewith:3457,185,986,7
goto:185,986,7
goto:185,986,7,0
goto:186,983,8
goto:187,983,8,0
label:hunt
goto:181,986,9
goto:175,991,9
goto:169,991,9
goto:163,991,9
goto:160,985,9
goto:158,980,9
goto:159,980,9,0
goto:163,983,10
goto:159,980,10
usewith:3003,159,980,10
goto:159,980,10,0
goto:156,981,9
usewith:3003,156,981,9
goto:156,981,9,0
goto:152,984,8
goto:155,981,8
goto:156,981,8,0
goto:159,988,9
goto:153,989,9
goto:147,988,9
goto:141,992,9
goto:135,992,9
goto:135,989,9
usewith:3003,135,989,9
goto:135,989,9,0
goto:132,989,8
goto:134,989,8
goto:135,989,8,0
goto:132,987,9
goto:133,987,9,0
goto:127,987,10
goto:127,987,10
goto:133,987,10
goto:133,987,10
usewith:3003,133,987,10
goto:133,987,10,0
goto:139,991,9
goto:145,990,9
goto:151,987,9
goto:157,990,9
goto:157,996,9
goto:151,997,9
goto:150,1003,9
goto:148,1006,9
goto:149,1006,9,0
goto:154,1005,10
goto:149,1006,10
usewith:3003,149,1006,10
goto:149,1006,10,0
goto:151,1006,9
usewith:3003,151,1006,9
goto:151,1006,9,0
goto:157,1007,8
goto:163,1007,8
goto:157,1008,8
goto:151,1007,8
goto:150,1006,8
goto:151,1006,8,0
goto:152,1000,9
goto:160,991,9
goto:166,991,9
goto:172,991,9
goto:178,991,9
goto:184,987,9
goto:187,985,9
label:check
function:[[
-- Verifica se a Cap est� CR�TICA (menos de 20)


if player:getFreeCapacity() < 0.20 then


  delay(150)


  -- Tenta ir para o dep�sito


  if gotoLabel("Depositar") then


    return true


  else


    -- Se falhar em achar o label 'Depositar', volta pra hunt para n�o travar parado


    delay(300)


    gotoLabel("hunt")


    return true


  end


end


-- Se tiver Cap sobrando (> 0.20), for�a o loop para o in�cio da hunt


gotoLabel("hunt")


return true



]]
label:depositar
goto:187,983,9
usewith:3003,187,983,9
goto:187,983,9
goto:185,986,8
usewith:3003,185,986,8
goto:185,986,8,0
goto:186,992,7
goto:192,990,7
goto:198,985,7
goto:201,979,7
goto:202,977,7,0
goto:208,976,6
function:[[
TargetBot.setOn(false)


return true



]]
goto:208,977,6,0
label:deposit_reset
goto:214,974,7
goto:210,970,7,0
goto:204,971,8
goto:200,971,8
function:[[
storage.depositStep = storage.depositStep or 1


local amount = storage.totalGold or 0


-- Se n�o tiver gold, vai embora


if amount <= 0 then


    storage.depositStep = nil


    gotoLabel("Voltar_cavebot")


    return true


end


-- Sequ�ncia de conversa


if storage.depositStep == 1 then


    say("oi")


    delay(1000)


    storage.depositStep = 2


    return "retry"


elseif storage.depositStep == 2 then


    say("depositar")


    delay(1000)


    storage.depositStep = 3


    return "retry"


elseif storage.depositStep == 3 then


    say(tostring(amount)) -- Fala o valor que o Macro contou


    delay(1000)


    storage.depositStep = 4


    return "retry"


elseif storage.depositStep == 4 then


    say("sim")


    delay(1000)


    storage.depositStep = nil -- Reseta a sequ�ncia


    return true


end


return "retry"



]]
goto:207,967,8
function:[[
local idItem = 3056 -- Bronze Amulet


local lockerIds = {3497, 3498, 3499, 3500}


local maxTentativas = 3 -- Quantas vezes tenta jogar na mesma BP antes de trocar


-- 1. Garante Locker Aberto


local lockerC = nil


for _, c in pairs(g_game.getContainers()) do


    if c:getName():lower():find("locker") then


        lockerC = c


        break


    end


end


if not lockerC then


    local p = g_game.getLocalPlayer()


    local pos = p:getPosition()


    for x = -1, 1 do


        for y = -1, 1 do


            if math.abs(x) + math.abs(y) == 1 then


                local t = g_map.getTile({x=pos.x+x, y=pos.y+y, z=pos.z})


                if t then


                    for _, i in ipairs(t:getItems()) do


                        for _, lid in ipairs(lockerIds) do


                            if i:getId() == lid then


                                g_game.use(i)


                                storage.lockerSlot = 0 


                                storage.fails = 0


                                delay(800)


                                return "retry"


                            end


                        end


                    end


                end


            end


        end


    end


    return true


end


-- 2. Encontra o item na sua mochila


local itemToDeposit = nil


for _, c in pairs(g_game.getContainers()) do


    -- N�o pega itens do pr�prio Locker


    if c:getId() ~= lockerC:getId() then 


        for _, i in ipairs(c:getItems()) do


            if i:getId() == idItem then


                itemToDeposit = i


                break


            end


        end


    end


    if itemToDeposit then break end


end


-- Se n�o tiver mais amuletos, reseta e termina


if not itemToDeposit then 


    storage.lockerSlot = 0


    storage.fails = 0


    return true 


end


-- 3. Define o alvo (Slot do Locker)


storage.lockerSlot = storage.lockerSlot or 0


storage.fails = storage.fails or 0


local targetItem = lockerC:getItem(storage.lockerSlot)


-- Se acabou os slots do Locker, volta para o zero (ou pare se preferir)


if not targetItem then


    storage.lockerSlot = 0


    return true


end


-- Pula se for o "Depot Chest" ou n�o for uma mochila


if targetItem:getName() == "Depot Chest" or not targetItem:isContainer() then


    storage.lockerSlot = storage.lockerSlot + 1


    storage.fails = 0


    return "retry"


end


-- 4. Detecta se travou (Mochila cheia)


-- Compara se estamos tentando mover exatamente o mesmo item repetidamente


if storage.lastItemUid == itemToDeposit:getId() and storage.lastItemCount == itemToDeposit:getCount() then


    storage.fails = storage.fails + 1


else


    storage.fails = 0 -- Reset se o item mudou (significa que o anterior foi depositado)


end


-- Atualiza rastreador


storage.lastItemUid = itemToDeposit:getId()


storage.lastItemCount = itemToDeposit:getCount()


-- Se falhou X vezes na mesma BP, troca de slot


if storage.fails > maxTentativas then


    storage.lockerSlot = storage.lockerSlot + 1


    storage.fails = 0


    return "retry"


end


-- 5. A��o: Joga o item no Slot do Locker


g_game.move(itemToDeposit, lockerC:getSlotPosition(storage.lockerSlot), itemToDeposit:getCount())


delay(400) 


return "retry"



]]
goto:210,970,8
goto:210,970,8,0
gotolabel:voltar_cavebot
label:templo-dp
function:[[
TargetBot.setOn(false)


return true



]]
goto:279,990,7
goto:279,984,7
goto:279,978,7
goto:274,972,7
goto:274,966,7
goto:268,965,7
goto:262,965,7
goto:256,965,7
goto:250,965,7
goto:244,966,7
goto:238,966,7
goto:232,968,7
goto:226,969,7
goto:220,970,7
goto:214,969,7
goto:210,969,7
gotolabel:deposit_reset
config:{"ignoreFields":false,"ping":100,"walkDelay":10,"mapClick":false,"mapClickDelay":100,"skipBlocked":false,"useDelay":400}
extensions:[[
[

]
]]
